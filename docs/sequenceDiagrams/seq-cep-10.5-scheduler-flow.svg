<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="353.4px" preserveAspectRatio="none" style="width:273px;height:353px;" version="1.1" viewBox="0 0 273 353" width="273.6px" zoomAndPan="magnify"><defs><filter height="300%" id="f1cglx2j5405c1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142.2" x="66.45" y="14.1211">10.5. Notification Scheduler Flow</text><rect fill="#90EE90" height="326.4492" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="240.3" x="17.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="71.55" y="28.234">Central Event Processing Service</text><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="226.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="45.3" y="75.7723"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="230.7" y="128.5313"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="230.7" y="224.0766"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="217.677" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="259.5" x="7.8" y="79.9723"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="117.9316" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="247.5" x="13.8" y="175.5176"/><rect fill="#FFFFFF" height="1.2" style="stroke: none; stroke-width: 0.6000000238418579;" width="247.5" x="13.8" y="292.2492"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="48" x2="48" y1="69.7723" y2="307.8492"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="233.7" x2="233.7" y1="69.7723" y2="307.8492"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="19.8" y="68.0004">Action Agent</text><ellipse cx="48.3" cy="50.2793" fill="#FEFECE" filter="url(#f1cglx2j5405c1)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="45.9,43.0793,49.5,40.0793,48.3,43.0793,49.5,46.0793,45.9,43.0793" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="19.8" y="315.3703">Action Agent</text><ellipse cx="48.3" cy="326.7422" fill="#FEFECE" filter="url(#f1cglx2j5405c1)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="45.9,319.5422,49.5,316.5422,48.3,319.5422,49.5,322.5422,45.9,319.5422" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="212.1" y="68.0004">CEP Store</text><path d="M222.9,38.2793 C222.9,32.2793 233.7,32.2793 233.7,32.2793 C233.7,32.2793 244.5,32.2793 244.5,38.2793 L244.5,53.8793 C244.5,59.8793 233.7,59.8793 233.7,59.8793 C233.7,59.8793 222.9,59.8793 222.9,53.8793 L222.9,38.2793 " fill="#FEFECE" filter="url(#f1cglx2j5405c1)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M222.9,38.2793 C222.9,44.2793 233.7,44.2793 233.7,44.2793 C233.7,44.2793 244.5,44.2793 244.5,38.2793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="212.1" y="315.3703">CEP Store</text><path d="M222.9,323.1422 C222.9,317.1422 233.7,317.1422 233.7,317.1422 C233.7,317.1422 244.5,317.1422 244.5,323.1422 L244.5,338.7422 C244.5,344.7422 233.7,344.7422 233.7,344.7422 C233.7,344.7422 222.9,344.7422 222.9,338.7422 L222.9,323.1422 " fill="#FEFECE" filter="url(#f1cglx2j5405c1)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M222.9,323.1422 C222.9,329.1422 233.7,329.1422 233.7,329.1422 C233.7,329.1422 244.5,329.1422 244.5,323.1422 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="226.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="45.3" y="75.7723"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="230.7" y="128.5313"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="230.7" y="224.0766"/><path d="M7.8,79.9723 L95.4,79.9723 L95.4,84.1723 L89.4,90.1723 L7.8,90.1723 L7.8,79.9723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="217.677" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="259.5" x="7.8" y="79.9723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60.6" x="16.8" y="88.1133">Scheduler Flow</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.3" x2="76.5" y1="103.1449" y2="103.1449"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="76.5" x2="76.5" y1="103.1449" y2="110.9449"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.9" x2="76.5" y1="110.9449" y2="110.9449"/><polygon fill="#A80036" points="57.9,108.5449,51.9,110.9449,57.9,113.3449,55.5,110.9449" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="55.5" y="100.2996">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="63.3" y="100.2996">Event</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32.4" x="86.1" y="100.2996">actionId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="105.6" x="120.9" y="100.2996">triggered by scheduled time</text><polygon fill="#A80036" points="223.5,126.1313,229.5,128.5313,223.5,130.9313,225.9,128.5313" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.3" x2="227.1" y1="128.5313" y2="128.5313"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="55.5" y="125.6859">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="78" x="63.3" y="125.6859">Request Action by Id</text><polygon fill="#FFFFE0" filter="url(#f1cglx2j5405c1)" points="220.8,154.3313,246.6,154.3313,252.6,160.9313,246.6,168.1313,220.8,168.1313,214.8,160.9313,220.8,154.3313" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="222" y="164.2723">action</text><path d="M13.8,175.5176 L51,175.5176 L51,179.7176 L45,185.7176 L13.8,185.7176 L13.8,175.5176 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="117.9316" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="247.5" x="13.8" y="175.5176"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="183.6586">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="60" y="183.0984">[Action is active]</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.3" x2="76.5" y1="198.6902" y2="198.6902"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="76.5" x2="76.5" y1="198.6902" y2="206.4902"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.9" x2="76.5" y1="206.4902" y2="206.4902"/><polygon fill="#A80036" points="57.9,204.0902,51.9,206.4902,57.9,208.8902,55.5,206.4902" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="55.5" y="195.8449">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="136.8" x="63.3" y="195.8449">Reset action timesTriggered counter</text><polygon fill="#A80036" points="223.5,221.6766,229.5,224.0766,223.5,226.4766,225.9,224.0766" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.3" x2="227.1" y1="224.0766" y2="224.0766"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="55.5" y="221.2313">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="79.2" x="63.3" y="221.2313">Persist Action Object</text><polygon fill="#FFFFE0" filter="url(#f1cglx2j5405c1)" points="220.8,249.8766,246.6,249.8766,252.6,256.4766,246.6,263.6766,220.8,263.6766,214.8,256.4766,220.8,249.8766" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="222" y="259.8176">action</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.3" x2="76.5" y1="279.6492" y2="279.6492"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="76.5" x2="76.5" y1="279.6492" y2="287.4492"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="51.9" x2="76.5" y1="287.4492" y2="287.4492"/><polygon fill="#A80036" points="57.9,285.0492,51.9,287.4492,57.9,289.8492,55.5,287.4492" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="55.5" y="276.8039">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="79.2" x="63.3" y="276.8039">Reschedule the same</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32.4" x="144.9" y="276.8039">actionId</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="261.3" y1="292.8492" y2="292.8492"/><!--
@startuml
title 10.5. Notification Scheduler Flow
autonumber

control "Action Agent" as AA
database "CEP Store" as DB

box "Central Services" #LightYellow
end box
box "Central Event Processing Service" #LightGreen
participant AA
participant DB
end box

Group Scheduler Flow
    activate AA
    AA -> AA: Event **actionId** triggered by scheduled time
    AA -> DB: Request Action by Id
    hnote over DB #LightYellow
        action
    end note
    activate DB
    deactivate DB
    alt Action is active
    AA -> AA: Reset action timesTriggered counter
    AA -> DB: Persist Action Object
    hnote over DB #LightYellow
        action
    end note
    activate DB
    deactivate DB
    AA -> AA: Reschedule the same **actionId**
    else
    end
end
    deactivate AA
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>